<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Here's Drupal!</title>

    <meta name="description" content="The Tonight Show: A decoupled architecture, in code and in organization.">
    <meta name="author" content="Andrew Berry and David Diers">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <script type="text/javascript" src="http://fast.fonts.com/jsapi/96befd0d-cd0e-4eba-9cd7-6f6bea29dae1.js"></script>
    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="icomoon/style.css" id="icomoon">
    <link rel="stylesheet" href="css/theme/policy.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">

        <section class="centered">
          <h1>Here's Drupal!</h1>
          <p class="callout">Tonight on the Tonight Show with Jimmy Fallon</p>
          <p>
           <a href="http://twitter.com/deviantintegral" title="Follow Andrew Berry on Twitter">@deviantintegral</a>
           of <a href="http://twitter.com/lullabot" title="Follow Lullabot on Twitter">@lullabot</a> &amp;
            <br /><a href="http://twitter.com/beautyhammer" title="Follow David Diers on Twitter">@beautyhammer</a>
            of <a href="http://twitter.com/fourkitchens" title="Follow Four Kitchens on Twitter">@fourkitchens</a>
          </p>
          <p style="margin-top: 200px;">Drupalcon Austin, June 3 2014 - Case Studies</p>
        </section>

        <section>
          <h1>The Stage</h1>
          <aside class="notes">
            <p>The Tonight Show is the longest-running television show in history, airing on NBC. It's got a long, storied history, with over 11,000 episodes since 1954.</p>
          </aside>
        </section>

        <section>
          <img src="/img/tsjf-homepage.jpg" alt="The Tonight Show home page." style="max-height: inherit;" width="1280"/>
          <aside class="notes">
            <p>This is The Tonight Show on NBC.com. The site is responsive, touch friendly, and heavily focused on image and video content. Here's Drupal!</p>
            <p>But not really. Drupal's just one component of several different systems, each built and tuned to support a specific set of functionality.</p>
            <p>Today, David and I are going to talk about how we went from a Drupal installation screen, all the way to what you see today.</p>
            <p>NBCUniversal is owned by Comcast, with over 136K employees.</p>
          </aside>
        </section>

        <section>
          <h2>Enterprise Softwareâ„¢</h2>
          <aside class="notes">
            <p>What do you think of when you hear the words "Enterprise software"?</p>
            <ul>
              <li>Large</li>
              <li>Complicated</li>
              <li>Slow</li>
              <li>18 months</li>
            </ul>

            <p>But, think about just the basics that need to happen for a new or re-launched talk show.</p>
            <ul>
              <li>Choosing the host (they will lead the creative direction)</li>
              <li>Building the staff to support the show</li>
              <li>Defining the creative direction and content of the show.</li>
              <li>This has to happen <strong>before</strong> technical work can start.</li>
            </ul>

          </aside>
        </section>

        <section>
          <h2>We can't build a <strong>useful</strong> website until</h2>
          <ul>
            <li>A host is chosen</li>
            <li>The creative direction is defined</li>
            <li>This has to happen <strong>before</strong> technical work can start.</li>
          </ul>

          <aside class="notes">
            <p>Even then, this just gets us to a website that could mirror the show.</p>
            <p>We need to treat the web as something that isn't just bolted-on to a show. It needs to be a first-class component of the show experience.</p>
            <p>A successful show site isn't just a list of episodes; it's got to be a channel for both repeat and unique content.</p>
            <p>In the case of The Tonight Show, by the middle of December 2013 most of this work was complete enough to begin work on the site and apps.</p>
            <p>Hard show launch date of February 17th, 2014, with a pre-show site needing to be launched a few weeks before.</p>
          </aside>
        </section>

        <section>
          <h1>Six Weeks</h1>
          <aside class="notes">
            <p>Before we get into how we approached this from the tech, let's talk about who was involved.</p>
          </aside>
        </section>

        <section>
          <h1>The Guests</h1>
        </section>

        <section>
          TODO: This logo is the best I've found, and isn't good :)
          <img src="img/nbcuniversal_logo_new.png" alt="NBCUniversal"/>
          <aside class="notes">
            <p>NBC Digital; they're responsible for anything and everything digital for the NBC television brand. It's their job to build and maintain whatever online tools shows need to be effective, competitive, and engaging.</p>
            <p>NBC Operations and Tools Support; They're the team behind the Publisher 7 Drupal distribution used internally at NBC Digital.</p>
          </aside>
        </section>

        <section>
          <img src="img/CPB_LOGO_lockups_1-03.jpg" alt="Crispin Porter + Bogusky"/>
          <aside class="notes">
            <p><abbr title="Crispin Porter + Bogusky">CP+B</abbr> the primary contractor for <abbr title="The Tonight Show with Jimmy Fallon">TSJF</abbr>, they were responsible for designing and building both the web app and the mobile apps.</p>
          </aside>
        </section>

        <section>
          <img src="img/four_kitchens.jpeg" alt="Four Kitchens"/>
          <aside class="notes">
            <p>Four Kitchens and Lullabot on the Drupal team. We'd worked together on NBC.com (which at the time was in parallel development).</p>
          </aside>
        </section>

        <section>
          <img src="img/lullarobot_square.png" alt="Lullabot"/>
          <aside class="notes">
            <p>Both companies provided consultants, Drupal expertise, and developer resources.</p>
            <p>The sun never set on the Tonight Show team.</p>
            <p>Not only did we have a complex site to build, with a tight timeline, we had to with with a distributed team in both place and time.</p>
          </aside>
        </section>

        <section>
          <img src="img/Team%20members.jpg" style="max-height: inherit;" width="1280" alt="Map of team, spanning most of the world." />

          <aside class="notes">
            <p>We have all of these team members, variance in time, place, company, and background separating them. I remember thinking "if this project is going to launch on time and with a full set of features, we'll need to structure the architecture itself to be non-blocking and dependency free.."</p>
          </aside>
        </section>

        <section>
          <blockquote>To succeed, we need a non-blocking technical architecture.</blockquote>
        </section>

        <section>
          <h1>Decompose the system</h1>
          <aside class="notes">
            <p>Our first task was to define the systems that needed to be built, and who owned what.</p>
            <p>Then, we could map each system to each team's primary expertise and give them ownership over the product.</p>
            <p>We started from the source of content (to us) and moved through each system all the way to the end user.</p>
            <ul>
              <li>All non-video content from the show's producers into Publisher 7.</li>
              <li>Video content from MPX, curated by producers in P7.</li>
              <li>P7 would be owned by the "Drupal crack team"; 4K, Lullabot</li>
              <li>The API design was handled by the two Drupal architects and the lead CP+B architect.</li>
              <li>Front end and apps handled by CP+B.</li>
              <li>Product was owned by NBC, so they handled QA from an acceptance standpoint, while CP+B the first QA pass.</li>
            </ul>
          </aside>
        </section>

        <section>
          <img src="img/responsibilities.png" style="max-height: inherit;" alt="Quadrant diagram of who was primarily responsible for what."/>
          <aside class="notes">
            <p>10 minutes</p>
          </aside>
        </section>

        <section>
          <h2 class="static-title">In a way, it's like winning at "Lip Synch Battle"</h2>
          <p>TODO: Need Rules of Lip Synch Battle</p>

          TODO: Need images from lip synch battle bit.

          <ul>
            <li>Be flexible</li>
            <li>Have some bits prepared</li>
            <li>You won't know what is coming, but you can practice how you will react</li>
          </ul>

          <aside class="notes">
            <ul>
               <li>Allow independent iteration on all layers of the site</li>
               <li>Play to our strengths - reduce and simplify developer dependencies</li>
               <li>Foster a mindset and a language not a prescription</li>
             </ul>
         </aside>
        </section>

        <section>
        <h2 class="static-title">Our Non-Blocking Approach</h2>
          <p>The two biggest components are:</p>
          <ul>
            <li>A <abbr>COPE</abbr> Decoupled technology stack</li>
            <li>Semantic content model</li>
          </ul>
          <aside class="notes">
             <p>A decoupled app &amp; web front end with a services based Drupal API layer.</p>
             <p>And an abstracted semantic content model that supported great iteration.</p>
          </aside>
        </section>

        <section>
          <section>
            <h2 class="static-title">So...Semantic what now?</h2>
            <aside class="notes">
               <p>I'll explain Semantic in a moment but let's start with how we got there.</p>
               <p>We started working on the API first we all throught we could unblock all teams for asynchronous work</p>
               <p>BUT we quickly observed we were headed down a prescriptive and unsustainable path.</p>
               <p>Andrew, what were some of the problems we saw rear their head at that point?</p>
               <p>Endpoints tended to be requests for very specific resources and the front end was dictating the content model.</p>
            </aside>
          </section>
          <section>
            <h2 class="static-title">So...Semantic whatsit?</h2>
            <p>We started designing the API thinking that setting outputs would unblock the app and front end teams</p>
            <p>However that led to a lot of 1-1 endpoints - a non-agnostic API approach</p>
          </section>
        </section>

        <section>
          <h2 class="static-title">...</h2>
          <img src="img/failboat.jpg" alt="failboat">

          <aside class="notes">
            <p>This was pretty close to a blocking workflow and clearly not going to help us suceed.</p>
            <ol>
              <li>Front end and back ends are very coupled.</li>
              <li>Content model does not have the flexibility show producers need</li>
            </ol>
            <p>Based on this approach we realized that we need to rethink our content approach</p>
          </aside>
        </section>

        <section>
          <section>
            <h2 class="static-title">The Dawn of the Semantic Content Model</h2>
            <aside class="notes">
              <p>It can be easy in Drupal to have a page centric content model, you start your model from the pages or sections you want available and that then drives the fields, content and their relations</p>
              <p>But who does that put in the driver's seat?</p>
            </aside>
          </section>
          <section>
              <img src="img/toonses.jpg" alt="toonses">
              <aside class="notes">
                <p>Your site is driving your content, wouldn't you prefer that your content drives the site? It's a more sustainable and more meaningful model.</p>
                <p>Semantic Content Modeling would have you create structures that resemble the real-life elements of your business</p>
                <p>Since Drupal wasn't responsible for pages at all but content we had some very clear freedom from that pattern, which, was helpful in creating agnostic and dependency free endpoints.</p>
              </aside>
          </section>
          <section>
            <h2 class="static-title">The Dawn of the Semantic Content Model</h2>
            <p>Content structures that resemble real-life elements of your business</p>
            <p>For the Tonight Show that meant putting the content resources together like the show.</p>
          </section>
        </section>

        <section>
          <section>
            <h2 class="static-title">Thinking Semantically: A joke is the smallest atomic unit of funny.</h2>
            <aside class="notes">
              <p>Eddie from NBC Digital had this great insight to really push for the idea that the smallest meaningful component of the late show, is the joke, and that we could build from there.</p>
              <p>It coincided perfectly with the mission of the site, the apps, and the property, to provide shareable moments that viewers, fans and their networks can experience the best moments time and again.</p>
            </aside>
          </section>
          <section>
            <h2 class="static-title">Thinking Semantically: A joke is the smallest atomic unit of funny.</h2>
            <p>Build from the smallest unique component of the show</p>
            <!--- TODO: Diagram of show and components-->
            <div class="col-two index-list">
              <div class="col left centered">
                <p><strong>Show elements:</strong></p>
                <ul>
                  <li>Joke</li>
                  <li>Bit</li>
                  <li>Segment</li>
                </ul>
              </div>
              <div class="col right centered">
                <p><strong>Other show elements:</strong></p>
                <ul>
                  <li>Guests</li>
                  <li>Challenges</li>
                  <li>Games</li>
                </ul>
              </div>
            </div>
          </section>
        </section>


        <section>
          <section>
            <h2 class="static-title">Semantic and Abstract</h2>
          </section>
          <section>
            <h2 class="static-title">Semantic and Abstract</h2>
            <p>Addresses volatility in trends and interests - gives you flexibility</p>
            <p>Connects the dots between performance and production</p>
          </section>
        </section>

        <section>
          <section>
            <h2 class="static-title">Semantic Content Modeling Benefits</h2>
            <aside>
              <p>Gave all teams - developers, q/a, editorial a shared meaningful language that was native both to the show and the web stack.</p>
              <p>Make sense editorially for the long term</p>
              <p>Provided a familiar Drupal editorial process with a non-page based content paradigm</p>
              <p>AND... now you've placed content in the driver's seat, your content is driving your properties not the other way around</p>
            </aside>
          </section>
          <section>
            <h2 class="static-title">Benefits of Semantic Content Modeling:</h2>
            <ul>
              <li>Shared Language for all teams</li>
              <li>Sustainable</li>
              <li>Looked like any other editorial process at NBC Digital</li>
              <li>Content is finally driving</li>
            </ul>
          </section>
        </section>

        <section>
          <section>
            <h2 class="static-title">In Practice</h2>
            <p>We ended up with a Semantic content model...MOSTLY</p>
            <aside class="notes">
              <p>What we found is that it made sense to have a multi-layered content approach</p>
              <p>The theory of it can be taken to far - it's like database optimization</p>
              <p>Get the benefits of semantic content modeling and get the benefits of a familiar editorial workflow.</p>
            </aside>
          </section>
          <section>
            <h2 class="static-title">In Practice</h2>
            <div class="col-two index-list">
              <div class="col left centered">
                <h3>Building Blocks</h3>
                <ul>
                  <li>video</li>
                  <li>image</li>
                  <li>image galleries</li>
                  <li>carousels</li>
                  <li>carousel items</li>
                  <li>blog post</li>
                  <li>guests</li>
                  <li>queues (Arbitrary collection)</li>
                </ul>
              </div>
              <div class="col right centered">
                <h3>Semantic Elements</h3>
                <ul>
                  <li>Bits</li>
                  <li>Segments</li>
                  <li>Challenges</li>
                  <li>Games</li>
                  <li>Queues (as show)</li>
                </ul>
              </div>
            </div>
            <aside class="notes">
              <p>We created content types that weren't semantic but were building blocks</p>
              <p>We then created semantic show based content types which tied these elements together through references that we could utilize as endpoints.</p>
            </aside>
          </section>
        </section>

        <section>
          <h2 class="static-title">The Second Part of our Non-blocking approach: The API</h2>
          <p>Establish Ins/Outs - essential to non-blocking multi-platform development</p>
          <p>Could leverage some pre-exisiting API work</p>
          <p>Provide consitent editorial/backend experience</p>
          <p>Decouple backend Drupal concerns from speed dependent front-end itterations and deployment</p>

          <aside class="notes">
            <p>Multi-platform, multi-team development needed to happen independently</p>
            <p>Hopefully save time by adopting some existing API work.</p>
            <p>Provide continuity for editorial and support teams at NBC Digital.</p>
            <p>Develop with agility, respond to volatility, free front-end up for frequent updates.</p>
          </aside>
        </section>

        <section>
          <h2 class="static-title">More than meets the API</h2>
          <p>At its core: An OOP API built on Drupal services.</p>
          <p>BUT...it was more than that - the product was the design as much as it was the API</p>
          <p>The System is the Architect</p>

          <aside class="notes">
            <p>The design of the API was the product it was a codex and approach that allowed us to work multi-threaded.  It was like a commitment of behavior.</p>
            <p>TODO: Find good API resources state our principles.</p>
            <p><a href="https://www.lullabot.com/blog/article/legally-binding-your-web-apis">Legally binding your web APIs</a> came out of much of the TSJF API design work #self-promotion</p>
            <p>A versionless, backwards compatible, hyrdra styled development approach - itterative and dependency free. The API was often feature forward of the app and site releases.</p>
          </aside>
        </section>

        <section>
          <h2 class="static-title">API Concerns</h2>
          TODO: Diagram the concerns and capabilities of Services Wrapper - generally describe what it was able to do.
          <aside class="notes">
            <p>Here are the basic concerns of our API</p>
            <p>Provided a highly customizable way to select indvidual and groups of semantic content for endpoints</p>
            <p>Established caching, content permissions, and responsive ready resource delivery patterns in a familiar way to the enterprise (in use on one other property)</p>
            <p>Leveraged DBTNG dynamic query assembly, several layers of caching (entity and custom), and services classes.</p>
            <p>Did not handle routing - very dumb here - needed to get inventive</p>
          </aside>
        </section>

        <section>
          <h2 class="static-title">That's no API, it's a PHPOOPAPI</h2>
          <p>Let us utilize strong PHP OOP resources</p>
          <p>OOP inheritence let us shift Drupalisms lower down and simplify implementing classes</p>
          <p>Simpler implementations allowed quicker and cleaner review of asynchronous work.</p>

          <aside class="notes">
            <p>Even within a services based API solution - there are options - why not site build for speed? - It may be fast to get out there but it is not fast to itterate on asynchronously.</p>
            <p>OOP code was more sensible than features or views code - easy to see what had been changed while teams worked around the clock and easy to extend cleanly and consistently</p>
            <p>Using a heavliy PHP OOP solution let us leverage the available expertise and resources in a sustainable way - still deliver a familiar editorial and backend solution.</p>
            <p>Solve for the obtuse in one place - keep drupalisms low to the ground </p>
          </aside>
        </section>

        <section>
          <h2 class="static-title">The API In practice.</h2>
          <p>The API was structured similarly so that calls could be placed in reliable ways.</p>
          <p>An API call looks something like this:</p>
          TODO: API call
          <p>And returns something like this:</p>
          TODO: API results
          <aside class="notes">
          </aside>
        </section>

        <section>
          <h2>Drupal as content provider - challenges</h2>
          <aside class="notes">
            <p>It's not a site - so you lose things you get for free like unpublished previewing</p>
            <p>CDN becomes interesting</p>
            <p>Routing and such</p>
          </aside>
        </section>

        <section>
          <h1>The Finale</h1>
          <aside class="notes">
            <p>Building a decoupled stack has been a hot topic in the industry for several years.</p>
            <p>But, it took either extraordinary content requirements or multiple channels to build.</p>
            <p>We thought decoupled solutions were a solution for content longevity.</p>
            <p>Decoupled architectures are  better way to work.</p>
          </aside>
        </section>

        <section>
          <h2>Constraints Inspire Innovation</h2>

          <aside class="notes">
            <p>We actually underestimated our ability to get work done in parallel. Now, I look at projects as "why not decoupled" instead of "why".</p>
            <p>Not only did we decouple our technology and our teams, but we also decoupled project stress.</p>
            <p>Some of our backend team members didn't even realize the site had launched to the public; our times of stress were spread out much more evenly throughout the whole project.</p>
          </aside>
        </section>

        <section>
          <h2 class="static-title">The timeline, the approach hid something surprising, something unusual...</h2>
          <div class="col-three">
            <div class="col first centered">
              <p>Approach</p>
            </div>
            <div class="col middle centered">
              <p>Synergy</p>
            </div>
            <div class="col last centered">
              <p>Deadline</p>
            </div>
          </div>
          <aside class="notes">
            <p>The deadline pushed us to decoupling, decoupling gave us a strongly asynchronous workflow, the asynchronous workflow let us complete the site more quickly.</p>
          </aside>
        </section>

        <section>
          <h2 class="static-title">Drupal Services as a Mindset</h2>
          <p>You have to have an entirely different mind set for Drupal as content provider vs Drupal as website.</p>
          <aside class="notes">
            <ul>
              <li>Have a routing plan - could include node access - just figure out who is going to be smart here.</li>
              <li>Responsive images - stay agnostic - may need to deliver all derrivatives as URLs</li>
              <li>Keep it lightweight, trips to the server may be an issue - interrupting good API design</li>
            </ul>
          </aside>
        </section>

        <section>
          <aside class="notes">
          <p>We're done! Questions?</p>
          </aside>
        </section>

        <section>
          <h1>Evaluate this Session</h1>
          <p>Please, and thank-you! We'd love to hear what you think.</p>
          <p><a href="https://austin2014.drupal.org/schedule">austin2014.drupal.org/schedule</a></p>
        </section>

        <!-- Two column example.
        <section>
          <h2 class="static-title">Side</h2>
          <div class="col-two index-list">
            <div class="col left centered">
              <p>
                <a href="#/firstsection">(firstsection):</a><br />
              </p>

              <p>
                <strong>Left side</strong><
              </p>
            </div>
            <div class="col right centered">
              <p>
                <strong>Right</strong>
              </p>
            </div>
          </div>
        </section>
        Two column example. -->

        <!-- Attribution Example
        <section>
          <h2 class="static-title">Attribution Example</h2>
          <section id="linkable-id">
            <h3>Example of attribution slide</h3>
            <blockquote>
              Quote

              <div class="attribution">
                <a href="http://drupal.org">A source</a>
              </div>
            </blockquote>
          </section>
        </section>
        Attribution -->
      </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: false,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Go to the first slide when you press zero.
        keyboard: {
          48: function() { Reveal.slide(0); },
        },

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>

  </body>
</html>
